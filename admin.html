<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª | Ù¾Ø§Ø±Ø³Ø§ØµÙ†Ø¹Øª Ø§ØµÙÙ‡Ø§Ù†</title>
  <meta name="robots" content="noindex, nofollow">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700;900&display=swap');
    :root {
      --steel: #1a1f2e; --steel-mid: #232a3b; --steel-light: #2d3650;
      --gold: #c8922a; --gold-light: #e8a830; --silver: #8a9ab5; --white: #f0f4ff;
      --success: #2ecc71; --danger: #e74c3c; --warning: #f39c12;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Vazirmatn', sans-serif; background: var(--steel); color: var(--white); min-height: 100vh; }

    /* ===== LOGIN ===== */
    #login-screen {
      min-height: 100vh; display: flex; align-items: center; justify-content: center;
      background: radial-gradient(ellipse at center, var(--steel-mid) 0%, var(--steel) 70%);
    }
    .login-box {
      background: var(--steel-mid); border: 1px solid rgba(200,146,42,0.25);
      border-radius: 20px; padding: 3rem 2.5rem; width: 100%; max-width: 400px; text-align: center;
    }
    .login-logo { font-size: 1.5rem; font-weight: 900; color: var(--gold); margin-bottom: 0.3rem; }
    .login-sub { color: var(--silver); font-size: 0.85rem; margin-bottom: 2rem; }
    .login-box input {
      width: 100%; background: var(--steel); border: 1px solid rgba(200,146,42,0.2);
      border-radius: 10px; padding: 0.9rem 1rem; color: var(--white);
      font-family: 'Vazirmatn', sans-serif; font-size: 0.95rem; margin-bottom: 1rem;
      outline: none; transition: border-color 0.2s; text-align: center;
    }
    .login-box input:focus { border-color: var(--gold); }
    .login-btn {
      width: 100%; background: linear-gradient(135deg, var(--gold), var(--gold-light));
      color: var(--steel); border: none; padding: 0.9rem; border-radius: 10px;
      font-size: 1rem; font-weight: 700; font-family: 'Vazirmatn', sans-serif;
      cursor: pointer; transition: all 0.3s;
    }
    .login-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(200,146,42,0.4); }
    .login-error { color: var(--danger); font-size: 0.85rem; margin-top: 0.8rem; display: none; }

    /* ===== ADMIN LAYOUT ===== */
    #admin-screen { display: none; min-height: 100vh; }
    .admin-layout { display: flex; min-height: 100vh; }

    /* Sidebar */
    .sidebar {
      width: 260px; background: var(--steel-mid); border-left: 1px solid rgba(200,146,42,0.15);
      display: flex; flex-direction: column; position: fixed; height: 100vh; overflow-y: auto; z-index: 50;
    }
    .sidebar-header { padding: 1.5rem; border-bottom: 1px solid rgba(200,146,42,0.15); }
    .sidebar-logo { font-size: 1.1rem; font-weight: 900; color: var(--gold); }
    .sidebar-logo span { color: var(--silver); font-size: 0.75rem; font-weight: 400; display: block; margin-top: 0.2rem; }
    .nav-section { padding: 1rem 0; }
    .nav-label { font-size: 0.68rem; color: var(--silver); letter-spacing: 2px; padding: 0 1.5rem; margin-bottom: 0.5rem; opacity: 0.6; }
    .nav-item {
      display: flex; align-items: center; gap: 0.8rem; padding: 0.75rem 1.5rem;
      color: var(--silver); font-size: 0.88rem; cursor: pointer; transition: all 0.2s;
      border-right: 3px solid transparent;
    }
    .nav-item:hover { color: var(--white); background: rgba(200,146,42,0.07); }
    .nav-item.active { color: var(--gold); background: rgba(200,146,42,0.1); border-right-color: var(--gold); }
    .nav-icon { font-size: 1.1rem; width: 20px; text-align: center; }
    .sidebar-footer { margin-top: auto; padding: 1rem 1.5rem; border-top: 1px solid rgba(200,146,42,0.15); }
    .logout-btn {
      width: 100%; background: rgba(231,76,60,0.15); border: 1px solid rgba(231,76,60,0.3);
      color: #e74c3c; padding: 0.6rem; border-radius: 8px; font-size: 0.85rem;
      font-family: 'Vazirmatn', sans-serif; cursor: pointer; transition: all 0.2s;
    }
    .logout-btn:hover { background: rgba(231,76,60,0.25); }

    /* Main content */
    .main-content { margin-right: 260px; flex: 1; padding: 2rem; min-height: 100vh; }
    .topbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
    .page-title { font-size: 1.4rem; font-weight: 700; }
    .preview-btn {
      background: rgba(200,146,42,0.15); border: 1px solid rgba(200,146,42,0.3);
      color: var(--gold); padding: 0.5rem 1.2rem; border-radius: 8px; font-size: 0.85rem;
      text-decoration: none; transition: all 0.2s;
    }
    .preview-btn:hover { background: rgba(200,146,42,0.25); }

    /* Panels */
    .panel { display: none; }
    .panel.active { display: block; }

    /* Cards */
    .card {
      background: var(--steel-mid); border: 1px solid rgba(200,146,42,0.12);
      border-radius: 16px; padding: 1.8rem; margin-bottom: 1.5rem;
    }
    .card-title { font-size: 1rem; font-weight: 700; color: var(--gold); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem; }

    /* Form elements */
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem; }
    .form-row.single { grid-template-columns: 1fr; }
    .field-group { margin-bottom: 1rem; }
    .field-label { font-size: 0.8rem; color: var(--silver); margin-bottom: 0.4rem; display: block; }
    .field-input, .field-textarea, .field-select {
      width: 100%; background: var(--steel); border: 1px solid rgba(200,146,42,0.2);
      border-radius: 8px; padding: 0.7rem 0.9rem; color: var(--white);
      font-family: 'Vazirmatn', sans-serif; font-size: 0.88rem; outline: none; transition: border-color 0.2s;
    }
    .field-input:focus, .field-textarea:focus { border-color: var(--gold); }
    .field-textarea { min-height: 100px; resize: vertical; }
    .field-select { cursor: pointer; }
    .field-select option { background: var(--steel-mid); }

    /* Buttons */
    .btn-save {
      background: linear-gradient(135deg, var(--gold), var(--gold-light));
      color: var(--steel); border: none; padding: 0.7rem 1.8rem;
      border-radius: 8px; font-size: 0.9rem; font-weight: 700;
      font-family: 'Vazirmatn', sans-serif; cursor: pointer; transition: all 0.3s;
    }
    .btn-save:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(200,146,42,0.4); }
    .btn-danger {
      background: rgba(231,76,60,0.15); border: 1px solid rgba(231,76,60,0.3);
      color: #e74c3c; padding: 0.5rem 1rem; border-radius: 8px; font-size: 0.82rem;
      font-family: 'Vazirmatn', sans-serif; cursor: pointer; transition: all 0.2s;
    }
    .btn-danger:hover { background: rgba(231,76,60,0.25); }
    .btn-add {
      background: rgba(46,204,113,0.12); border: 1px solid rgba(46,204,113,0.3);
      color: #2ecc71; padding: 0.6rem 1.2rem; border-radius: 8px; font-size: 0.85rem;
      font-family: 'Vazirmatn', sans-serif; cursor: pointer; transition: all 0.2s;
    }
    .btn-add:hover { background: rgba(46,204,113,0.2); }

    /* Toast */
    .toast {
      position: fixed; bottom: 2rem; left: 2rem; background: var(--success);
      color: white; padding: 0.8rem 1.5rem; border-radius: 10px; font-size: 0.88rem;
      transform: translateY(100px); opacity: 0; transition: all 0.3s; z-index: 9999;
    }
    .toast.show { transform: translateY(0); opacity: 1; }

    /* Portfolio grid */
    .portfolio-admin-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 1rem; margin-bottom: 1.5rem; }
    .portfolio-admin-item {
      background: var(--steel); border: 1px solid rgba(200,146,42,0.1); border-radius: 12px;
      overflow: hidden; position: relative;
    }
    .portfolio-admin-img {
      height: 120px; display: flex; align-items: center; justify-content: center;
      font-size: 3rem; background: var(--steel-light); position: relative;
    }
    .portfolio-admin-img img { width: 100%; height: 100%; object-fit: cover; position: absolute; inset: 0; }
    .portfolio-admin-info { padding: 0.8rem; }
    .portfolio-admin-info input {
      width: 100%; background: transparent; border: none; border-bottom: 1px solid rgba(200,146,42,0.2);
      color: var(--white); font-family: 'Vazirmatn', sans-serif; font-size: 0.78rem; padding: 0.2rem 0; margin-bottom: 0.4rem; outline: none;
    }
    .portfolio-admin-actions { display: flex; gap: 0.4rem; padding: 0.5rem 0.8rem; border-top: 1px solid rgba(200,146,42,0.1); }

    /* Services list */
    .service-admin-item {
      background: var(--steel); border: 1px solid rgba(200,146,42,0.1); border-radius: 10px;
      padding: 1rem; margin-bottom: 0.8rem; display: grid; grid-template-columns: auto 1fr 1fr auto; gap: 1rem; align-items: center;
    }
    .service-emoji-picker { font-size: 1.5rem; cursor: pointer; padding: 0.3rem; border-radius: 6px; background: var(--steel-mid); border: none; }

    /* Stats dashboard */
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; margin-bottom: 2rem; }
    .stat-card { background: var(--steel-mid); border: 1px solid rgba(200,146,42,0.12); border-radius: 14px; padding: 1.3rem; text-align: center; }
    .stat-card .num { font-size: 2rem; font-weight: 900; color: var(--gold); }
    .stat-card .lbl { font-size: 0.78rem; color: var(--silver); margin-top: 0.3rem; }

    /* Password change */
    .security-card { background: rgba(231,76,60,0.05); border: 1px solid rgba(231,76,60,0.2); border-radius: 16px; padding: 1.8rem; }

    /* Logo upload */
    .logo-upload-area {
      border: 2px dashed rgba(200,146,42,0.3); border-radius: 12px; padding: 2rem;
      text-align: center; cursor: pointer; transition: all 0.2s; margin-bottom: 1rem;
    }
    .logo-upload-area:hover { border-color: var(--gold); background: rgba(200,146,42,0.05); }
    .logo-preview { max-height: 80px; margin: 0 auto 1rem; display: block; }
    .logo-text-preview { font-size: 1.5rem; font-weight: 900; color: var(--gold); margin-bottom: 0.5rem; }

    /* Mobile */
    @media (max-width: 900px) {
      .sidebar { width: 100%; height: auto; position: relative; }
      .main-content { margin-right: 0; }
      .admin-layout { flex-direction: column; }
      .form-row { grid-template-columns: 1fr; }
      .service-admin-item { grid-template-columns: auto 1fr; }
    }
  </style>
</head>
<body>

<!-- ===== LOGIN ===== -->
<div id="login-screen">
  <div class="login-box">
    <div class="login-logo">ğŸ­ Ù¾Ø§Ø±Ø³Ø§ØµÙ†Ø¹Øª</div>
    <div class="login-sub">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø§ÛŒØª</div>
    <input type="password" id="password-input" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" onkeydown="if(event.key==='Enter') doLogin()">
    <button class="login-btn" onclick="doLogin()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</button>
    <div class="login-error" id="login-error">âŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª</div>
  </div>
</div>

<!-- ===== ADMIN ===== -->
<div id="admin-screen">
  <div class="admin-layout">

    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª<span>Ù¾Ø§Ø±Ø³Ø§ØµÙ†Ø¹Øª Ø§ØµÙÙ‡Ø§Ù†</span></div>
      </div>
      <nav class="nav-section">
        <div class="nav-label">Ù…Ø¯ÛŒØ±ÛŒØª</div>
        <div class="nav-item active" onclick="showPanel('dashboard')"><span class="nav-icon">ğŸ“Š</span> Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</div>
        <div class="nav-item" onclick="showPanel('contact')"><span class="nav-icon">ğŸ“</span> Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³</div>
        <div class="nav-item" onclick="showPanel('hero')"><span class="nav-icon">ğŸ </span> Ù…ØªÙ† ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</div>
        <div class="nav-item" onclick="showPanel('services')"><span class="nav-icon">âš™ï¸</span> Ø®Ø¯Ù…Ø§Øª</div>
        <div class="nav-item" onclick="showPanel('portfolio')"><span class="nav-icon">ğŸ–¼ï¸</span> Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ø±Ù‡Ø§</div>
        <div class="nav-item" onclick="showPanel('logo')"><span class="nav-icon">ğŸ¨</span> Ù„ÙˆÚ¯Ùˆ Ùˆ Ù†Ø§Ù…</div>
        <div class="nav-item" onclick="showPanel('articles')"><span class="nav-icon">ğŸ“</span> Ù…Ù‚Ø§Ù„Ø§Øª</div>
        <div class="nav-item" onclick="showPanel('stats')"><span class="nav-icon">ğŸ“ˆ</span> Ø¢Ù…Ø§Ø± Ø³Ø§ÛŒØª</div>
        <div class="nav-item" onclick="showPanel('security')"><span class="nav-icon">ğŸ”’</span> Ø§Ù…Ù†ÛŒØª</div>
      </nav>
      <div class="sidebar-footer">
        <button class="logout-btn" onclick="doLogout()">ğŸšª Ø®Ø±ÙˆØ¬ Ø§Ø² Ù¾Ù†Ù„</button>
      </div>
    </aside>

    <!-- Main -->
    <main class="main-content">
      <div class="topbar">
        <div class="page-title" id="panel-title">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</div>
        <a href="index.html" target="_blank" class="preview-btn">ğŸ‘ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ø§ÛŒØª</a>
      </div>

      <!-- DASHBOARD -->
      <div class="panel active" id="panel-dashboard">
        <div class="stats-grid">
          <div class="stat-card"><div class="num" id="dash-services">6</div><div class="lbl">Ø®Ø¯Ù…Ø§Øª</div></div>
          <div class="stat-card"><div class="num" id="dash-portfolio">3</div><div class="lbl">Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ø±</div></div>
          <div class="stat-card"><div class="num" id="dash-articles">5</div><div class="lbl">Ù…Ù‚Ø§Ù„Ù‡</div></div>
          <div class="stat-card"><div class="num">âœ…</div><div class="lbl">Ø³Ø§ÛŒØª ÙØ¹Ø§Ù„</div></div>
        </div>
        <div class="card">
          <div class="card-title">ğŸš€ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø³Ø±ÛŒØ¹</div>
          <p style="color:var(--silver); font-size:0.9rem; line-height:2;">
            Û±. Ù‡Ø± ØªØºÛŒÛŒØ±ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡ÛŒØ¯ Ø±Ø§ Ø¨Ø§ Ø¯Ú©Ù…Ù‡ <strong style="color:var(--gold)">Â«Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§ØªÂ»</strong> Ø«Ø¨Øª Ú©Ù†ÛŒØ¯.<br>
            Û². Ø¨Ø¹Ø¯ Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ØŒ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø³Ø§ÛŒØª Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø¢Ù¾Ø¯ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆØ¯.<br>
            Û³. Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯Ù† Ù†ØªÛŒØ¬Ù‡ØŒ Ø±ÙˆÛŒ Â«Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ø§ÛŒØªÂ» Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.<br>
            Û´. ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ â€” Ø¨Ø±Ø§ÛŒ Ø¨Ú©Ø§Ù¾ Ø§Ø² Â«ExportÂ» Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
          </p>
        </div>
        <div class="card">
          <div class="card-title">ğŸ’¾ Ø¨Ú©Ø§Ù¾ Ùˆ Ø±ÛŒØ³ØªÙˆØ±</div>
          <div style="display:flex; gap:1rem; flex-wrap:wrap;">
            <button class="btn-save" onclick="exportData()">ğŸ“¤ Export Ø¨Ú©Ø§Ù¾</button>
            <button class="btn-add" onclick="document.getElementById('import-file').click()">ğŸ“¥ Import Ø¨Ú©Ø§Ù¾</button>
            <input type="file" id="import-file" accept=".json" style="display:none" onchange="importData(event)">
            <button class="btn-danger" onclick="resetAll()">ğŸ—‘ Ø±ÛŒØ³Øª Ù‡Ù…Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
          </div>
        </div>
      </div>

      <!-- CONTACT -->
      <div class="panel" id="panel-contact">
        <div class="card">
          <div class="card-title">ğŸ“ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³</div>
          <div class="form-row">
            <div class="field-group">
              <label class="field-label">Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†</label>
              <input class="field-input" id="c-phone" placeholder="Ù…Ø«Ù„Ø§Ù‹: Û°Û³Û±-Û³Û´ÛµÛ¶Û·Û¸Û¹Û°">
            </div>
            <div class="field-group">
              <label class="field-label">Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ / ÙˆØ§ØªØ³Ø§Ù¾</label>
              <input class="field-input" id="c-mobile" placeholder="Ù…Ø«Ù„Ø§Ù‹: Û°Û¹Û±Û³-Û±Û²Û³-Û´ÛµÛ¶Û·">
            </div>
          </div>
          <div class="form-row single">
            <div class="field-group">
              <label class="field-label">Ø¢Ø¯Ø±Ø³ Ú©Ø§Ù…Ù„</label>
              <input class="field-input" id="c-address" placeholder="Ø§ØµÙÙ‡Ø§Ù†ØŒ Ø§Ø´ØªØ±Ø¬Ø§Ù†ØŒ ...">
            </div>
          </div>
          <div class="form-row">
            <div class="field-group">
              <label class="field-label">Ø³Ø§Ø¹Ø§Øª Ú©Ø§Ø±ÛŒ</label>
              <input class="field-input" id="c-hours" placeholder="Ø´Ù†Ø¨Ù‡ ØªØ§ Ù¾Ù†Ø¬Ø´Ù†Ø¨Ù‡ Û¸ ØªØ§ Û±Û¸">
            </div>
            <div class="field-group">
              <label class="field-label">Ø§ÛŒÙ…ÛŒÙ„ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
              <input class="field-input" id="c-email" placeholder="info@example.com">
            </div>
          </div>
          <div class="form-row single">
            <div class="field-group">
              <label class="field-label">Ù„ÛŒÙ†Ú© Google Maps (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
              <input class="field-input" id="c-map" placeholder="https://maps.google.com/...">
            </div>
          </div>
          <button class="btn-save" onclick="saveContact()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
        </div>
      </div>

      <!-- HERO -->
      <div class="panel" id="panel-hero">
        <div class="card">
          <div class="card-title">ğŸ  Ù…ØªÙ† ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ (Hero)</div>
          <div class="field-group">
            <label class="field-label">ØªÛŒØªØ± Ø§ØµÙ„ÛŒ (Ø®Ø· Ø§ÙˆÙ„)</label>
            <input class="field-input" id="h-title1" placeholder="ØªØ±Ø§Ø´Ú©Ø§Ø±ÛŒ Ùˆ ÙØ±Ø²Ú©Ø§Ø±ÛŒ">
          </div>
          <div class="field-group">
            <label class="field-label">ØªÛŒØªØ± Ø§ØµÙ„ÛŒ (Ø®Ø· Ø¯ÙˆÙ… - Ø¨Ø±Ø¬Ø³ØªÙ‡)</label>
            <input class="field-input" id="h-title2" placeholder="Ù¾Ø§Ø±Ø³Ø§ØµÙ†Ø¹Øª">
          </div>
          <div class="field-group">
            <label class="field-label">ØªÙˆØ¶ÛŒØ­ Ø²ÛŒØ± ØªÛŒØªØ±</label>
            <textarea class="field-textarea" id="h-desc" placeholder="Ø§Ø±Ø§Ø¦Ù‡ Ø®Ø¯Ù…Ø§Øª Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ù…Ø§Ø´ÛŒÙ†â€ŒÚ©Ø§Ø±ÛŒ Ø¯Ù‚ÛŒÙ‚..."></textarea>
          </div>
          <button class="btn-save" onclick="saveHero()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
        </div>
        <div class="card">
          <div class="card-title">ğŸ“Š Ø¢Ù…Ø§Ø± (Hero Stats)</div>
          <div class="form-row">
            <div class="field-group">
              <label class="field-label">Ø¢Ù…Ø§Ø± Û± - Ø¹Ø¯Ø¯</label>
              <input class="field-input" id="s-num1" placeholder="+Û±Û°">
            </div>
            <div class="field-group">
              <label class="field-label">Ø¢Ù…Ø§Ø± Û± - Ø¨Ø±Ú†Ø³Ø¨</label>
              <input class="field-input" id="s-lbl1" placeholder="Ø³Ø§Ù„ ØªØ¬Ø±Ø¨Ù‡">
            </div>
          </div>
          <div class="form-row">
            <div class="field-group">
              <label class="field-label">Ø¢Ù…Ø§Ø± Û² - Ø¹Ø¯Ø¯</label>
              <input class="field-input" id="s-num2" placeholder="+ÛµÛ°Û°">
            </div>
            <div class="field-group">
              <label class="field-label">Ø¢Ù…Ø§Ø± Û² - Ø¨Ø±Ú†Ø³Ø¨</label>
              <input class="field-input" id="s-lbl2" placeholder="Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ù†Ø¬Ø§Ù…â€ŒØ´Ø¯Ù‡">
            </div>
          </div>
          <div class="form-row">
            <div class="field-group">
              <label class="field-label">Ø¢Ù…Ø§Ø± Û³ - Ø¹Ø¯Ø¯</label>
              <input class="field-input" id="s-num3" placeholder="Û±Û°Û°Ùª">
            </div>
            <div class="field-group">
              <label class="field-label">Ø¢Ù…Ø§Ø± Û³ - Ø¨Ø±Ú†Ø³Ø¨</label>
              <input class="field-input" id="s-lbl3" placeholder="Ø±Ø¶Ø§ÛŒØª Ù…Ø´ØªØ±ÛŒ">
            </div>
          </div>
          <button class="btn-save" onclick="saveStats()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
        </div>
        <div class="card">
          <div class="card-title">ğŸ­ Ø¨Ø®Ø´ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</div>
          <div class="field-group">
            <label class="field-label">Ù¾Ø§Ø±Ø§Ú¯Ø±Ø§Ù Ø§ÙˆÙ„</label>
            <textarea class="field-textarea" id="about-p1"></textarea>
          </div>
          <div class="field-group">
            <label class="field-label">Ù¾Ø§Ø±Ø§Ú¯Ø±Ø§Ù Ø¯ÙˆÙ…</label>
            <textarea class="field-textarea" id="about-p2"></textarea>
          </div>
          <button class="btn-save" onclick="saveAbout()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
        </div>
      </div>

      <!-- SERVICES -->
      <div class="panel" id="panel-services">
        <div class="card">
          <div class="card-title">âš™ï¸ Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø¯Ù…Ø§Øª</div>
          <div id="services-list"></div>
          <button class="btn-add" onclick="addService()">+ Ø§ÙØ²ÙˆØ¯Ù† Ø®Ø¯Ù…Øª Ø¬Ø¯ÛŒØ¯</button>
          <br><br>
          <button class="btn-save" onclick="saveServices()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªÙ…Ø§Ù… Ø®Ø¯Ù…Ø§Øª</button>
        </div>
      </div>

      <!-- PORTFOLIO -->
      <div class="panel" id="panel-portfolio">
        <div class="card">
          <div class="card-title">ğŸ–¼ï¸ Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ø±Ù‡Ø§</div>
          <div class="portfolio-admin-grid" id="portfolio-grid"></div>
          <button class="btn-add" onclick="addPortfolioItem()">+ Ø§ÙØ²ÙˆØ¯Ù† Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ø±</button>
          <br><br>
          <button class="btn-save" onclick="savePortfolio()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ø±Ù‡Ø§</button>
        </div>
      </div>

      <!-- LOGO -->
      <div class="panel" id="panel-logo">
        <div class="card">
          <div class="card-title">ğŸ¨ Ù„ÙˆÚ¯Ùˆ Ùˆ Ù†Ø§Ù… Ø³Ø§ÛŒØª</div>
          <div class="field-group">
            <label class="field-label">Ù†Ø§Ù… Ú©Ø§Ø±Ú¯Ø§Ù‡ (Ø¨Ø®Ø´ Ø§ÙˆÙ„ - Ø·Ù„Ø§ÛŒÛŒ)</label>
            <input class="field-input" id="logo-name1" placeholder="Ù¾Ø§Ø±Ø³Ø§ØµÙ†Ø¹Øª">
          </div>
          <div class="field-group">
            <label class="field-label">Ù†Ø§Ù… Ú©Ø§Ø±Ú¯Ø§Ù‡ (Ø¨Ø®Ø´ Ø¯ÙˆÙ… - Ø³ÙÛŒØ¯)</label>
            <input class="field-input" id="logo-name2" placeholder="Ø§ØµÙÙ‡Ø§Ù†">
          </div>
          <div class="field-group">
            <label class="field-label">Ø¢Ù¾Ù„ÙˆØ¯ Ù„ÙˆÚ¯Ùˆ ØªØµÙˆÛŒØ±ÛŒ (PNG/SVG)</label>
            <div class="logo-upload-area" onclick="document.getElementById('logo-file').click()">
              <img id="logo-preview-img" src="" alt="" class="logo-preview" style="display:none;">
              <div id="logo-preview-text" class="logo-text-preview">Ù¾Ø§Ø±Ø³Ø§ØµÙ†Ø¹Øª</div>
              <div style="color:var(--silver); font-size:0.82rem;">Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ ÛŒØ§ ÙØ§ÛŒÙ„ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø±Ù‡Ø§ Ú©Ù†ÛŒØ¯</div>
              <div style="color:var(--silver); font-size:0.72rem; margin-top:0.3rem;">PNG, SVG, JPG â€” Ø­Ø¯Ø§Ú©Ø«Ø± Û²MB</div>
            </div>
            <input type="file" id="logo-file" accept="image/*" style="display:none" onchange="handleLogoUpload(event)">
          </div>
          <button class="btn-save" onclick="saveLogo()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ù„ÙˆÚ¯Ùˆ</button>
        </div>
      </div>

      <!-- ARTICLES -->
      <div class="panel" id="panel-articles">
        <div class="card">
          <div class="card-title">ğŸ“ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ù‚Ø§Ù„Ø§Øª</div>
          <div id="articles-list"></div>
          <button class="btn-add" onclick="addArticle()">+ Ø§ÙØ²ÙˆØ¯Ù† Ù…Ù‚Ø§Ù„Ù‡ Ø¬Ø¯ÛŒØ¯</button>
          <br><br>
          <button class="btn-save" onclick="saveArticles()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ù…Ù‚Ø§Ù„Ø§Øª</button>
        </div>
      </div>

      <!-- STATS -->
      <div class="panel" id="panel-stats">
        <div class="card">
          <div class="card-title">ğŸ“ˆ ÙˆØ¶Ø¹ÛŒØª Ù…Ø­ØªÙˆØ§</div>
          <div class="stats-grid">
            <div class="stat-card"><div class="num" id="stat-services">-</div><div class="lbl">Ø®Ø¯Ù…Ø§Øª ÙØ¹Ø§Ù„</div></div>
            <div class="stat-card"><div class="num" id="stat-portfolio">-</div><div class="lbl">Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ø±</div></div>
            <div class="stat-card"><div class="num" id="stat-articles">-</div><div class="lbl">Ù…Ù‚Ø§Ù„Ù‡</div></div>
            <div class="stat-card"><div class="num" id="stat-changes">0</div><div class="lbl">ØªØºÛŒÛŒØ± Ø§Ø¹Ù…Ø§Ù„â€ŒØ´Ø¯Ù‡</div></div>
          </div>
          <p style="color:var(--silver); font-size:0.85rem; line-height:1.8;">
            âš¡ ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± <strong style="color:var(--gold)">localStorage</strong> Ù…Ø±ÙˆØ±Ú¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.<br>
            ğŸ’¡ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡ Ù…Ø±ÙˆØ±Ú¯Ø± Ø¯ÛŒÚ¯Ø±ØŒ Ø§Ø² Export/Import Ø¨Ú©Ø§Ù¾ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.<br>
            ğŸ“Œ Ø³Ø§ÛŒØª GitHub Pages Ø¨Ø§ÛŒØ¯ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ HTML Ø±Ø§ Ù‡Ù… Ø¢Ù¾Ø¯ÛŒØª Ú©Ù†ÛŒØ¯ ØªØ§ ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø§Ø¦Ù…ÛŒ Ø´ÙˆÙ†Ø¯.
          </p>
        </div>
      </div>

      <!-- SECURITY -->
      <div class="panel" id="panel-security">
        <div class="security-card">
          <div class="card-title" style="color:#e74c3c;">ğŸ”’ ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</div>
          <div class="field-group">
            <label class="field-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ÙØ¹Ù„ÛŒ</label>
            <input type="password" class="field-input" id="old-pass">
          </div>
          <div class="field-group">
            <label class="field-label">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯</label>
            <input type="password" class="field-input" id="new-pass">
          </div>
          <div class="field-group">
            <label class="field-label">ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯</label>
            <input type="password" class="field-input" id="new-pass2">
          </div>
          <button class="btn-save" onclick="changePassword()" style="background:linear-gradient(135deg,#e74c3c,#c0392b);">ğŸ”’ ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</button>
        </div>
      </div>

    </main>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
// ===== CONFIG =====
const DEFAULT_PASS = 'parsa1234';
const STORAGE_KEY = 'parsasanat_admin';
let changeCount = 0;

// ===== DATA DEFAULTS =====
const defaults = {
  password: DEFAULT_PASS,
  contact: {
    phone: 'Û°Û³Û±-XXXXXXXX', mobile: 'Û°Û¹Û±Û³-XXX-XXXX',
    address: 'Ø§ØµÙÙ‡Ø§Ù†ØŒ Ø§Ø´ØªØ±Ø¬Ø§Ù†', hours: 'Ø´Ù†Ø¨Ù‡ ØªØ§ Ù¾Ù†Ø¬Ø´Ù†Ø¨Ù‡: Û¸ ØµØ¨Ø­ ØªØ§ Û¶ Ø¹ØµØ±',
    email: '', map: ''
  },
  hero: {
    title1: 'ØªØ±Ø§Ø´Ú©Ø§Ø±ÛŒ Ùˆ ÙØ±Ø²Ú©Ø§Ø±ÛŒ', title2: 'Ù¾Ø§Ø±Ø³Ø§ØµÙ†Ø¹Øª',
    desc: 'Ø§Ø±Ø§Ø¦Ù‡ Ø®Ø¯Ù…Ø§Øª Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ù…Ø§Ø´ÛŒÙ†â€ŒÚ©Ø§Ø±ÛŒ Ø¯Ù‚ÛŒÙ‚ Ø¨Ø§ Ø¨Ù‡Ø±Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªØ¬Ù‡ÛŒØ²Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡.\nØ¯Ù‚ØªØŒ Ú©ÛŒÙÛŒØª Ùˆ ØªØ­ÙˆÛŒÙ„ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ â€” ØªØ¹Ù‡Ø¯ Ù…Ø§Ø³Øª.'
  },
  stats: { num1:'+Û±Û°', lbl1:'Ø³Ø§Ù„ ØªØ¬Ø±Ø¨Ù‡', num2:'+ÛµÛ°Û°', lbl2:'Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ù†Ø¬Ø§Ù…â€ŒØ´Ø¯Ù‡', num3:'Û±Û°Û°Ùª', lbl3:'Ø±Ø¶Ø§ÛŒØª Ù…Ø´ØªØ±ÛŒ' },
  about: {
    p1: 'Ú©Ø§Ø±Ú¯Ø§Ù‡ ØªØ±Ø§Ø´Ú©Ø§Ø±ÛŒ Ùˆ ÙØ±Ø²Ú©Ø§Ø±ÛŒ Ù¾Ø§Ø±Ø³Ø§ØµÙ†Ø¹Øª Ø¯Ø± Ø´Ù‡Ø± Ø§Ø´ØªØ±Ø¬Ø§Ù†ØŒ Ø§Ø³ØªØ§Ù† Ø§ØµÙÙ‡Ø§Ù† Ø¨Ø§ Ø³Ø§Ù„â€ŒÙ‡Ø§ ØªØ¬Ø±Ø¨Ù‡ Ø¯Ø± Ø­ÙˆØ²Ù‡ Ù…Ø§Ø´ÛŒÙ†â€ŒÚ©Ø§Ø±ÛŒ ØµÙ†Ø¹ØªÛŒØŒ Ø®Ø¯Ù…Ø§Øª Ø¨Ø§Ú©ÛŒÙÛŒØª Ùˆ Ø¯Ù‚ÛŒÙ‚ Ø¨Ù‡ Ù…Ø´ØªØ±ÛŒØ§Ù† Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.',
    p2: 'Ù…Ø§ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø±Ù† ØªØ±Ø§Ø´ Ùˆ ÙØ±Ø²ØŒ Ù‚Ø·Ø¹Ø§Øª ØµÙ†Ø¹ØªÛŒ Ø±Ø§ Ø¨Ø§ Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§ Ùˆ Ù…Ø·Ø§Ø¨Ù‚ Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ ÙÙ†ÛŒ Ù…Ø´ØªØ±ÛŒØ§Ù† ØªÙˆÙ„ÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….'
  },
  logo: { name1: 'Ù¾Ø§Ø±Ø³Ø§ØµÙ†Ø¹Øª', name2: 'Ø§ØµÙÙ‡Ø§Ù†', img: '' },
  services: [
    { icon:'ğŸ”©', title:'ØªØ±Ø§Ø´Ú©Ø§Ø±ÛŒ', desc:'ØªØ±Ø§Ø´Ú©Ø§Ø±ÛŒ Ø¯Ù‚ÛŒÙ‚ Ø§Ù†ÙˆØ§Ø¹ Ù‚Ø·Ø¹Ø§Øª ÙÙ„Ø²ÛŒ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ±Ø§Ø´ ØµÙ†Ø¹ØªÛŒ. ØªÙˆÙ„ÛŒØ¯ Ø´ÙØªØŒ Ø¨ÙˆØ´ØŒ Ù¾ÛŒÚ† Ùˆ Ù‚Ø·Ø¹Ø§Øª Ø¯ÙˆØ§Ø± Ø¨Ø§ Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§.' },
    { icon:'âš¡', title:'ÙØ±Ø²Ú©Ø§Ø±ÛŒ', desc:'ÙØ±Ø²Ú©Ø§Ø±ÛŒ Ø§Ù†ÙˆØ§Ø¹ Ù‚Ø·Ø¹Ø§Øª Ø¨Ø§ Ø§Ø´Ú©Ø§Ù„ Ù¾ÛŒÚ†ÛŒØ¯Ù‡. Ø§ÛŒØ¬Ø§Ø¯ Ø´ÛŒØ§Ø±ØŒ Ø³Ø·Ø­â€ŒØªØ±Ø§Ø´ÛŒØŒ Ø¯Ù†Ø¯Ø§Ù†Ù‡â€ŒØ²Ù†ÛŒ Ùˆ Ù…Ø§Ø´ÛŒÙ†â€ŒÚ©Ø§Ø±ÛŒ Ù‚Ø·Ø¹Ø§Øª Ù…Ø³Ø·Ø­ Ø¨Ø§ Ø¯Ù‚Øª Ù…ÛŒÙ„ÛŒÙ…ØªØ±ÛŒ.' },
    { icon:'ğŸ“', title:'Ø³Ø§Ø®Øª Ù‚Ø·Ø¹Ø§Øª Ø³ÙØ§Ø±Ø´ÛŒ', desc:'Ø³Ø§Ø®Øª Ù‚Ø·Ø¹Ø§Øª ÛŒØ¯Ú©ÛŒ Ùˆ Ø³ÙØ§Ø±Ø´ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ ÙÙ†ÛŒ Ù…Ø´ØªØ±ÛŒ.' },
    { icon:'ğŸ”§', title:'ØªØ¹Ù…ÛŒØ± Ùˆ Ø¨Ø§Ø²Ø³Ø§Ø²ÛŒ Ù‚Ø·Ø¹Ø§Øª', desc:'ØªØ¹Ù…ÛŒØ±ØŒ Ø¨Ø§Ø²Ø³Ø§Ø²ÛŒ Ùˆ Ø§ÙˆØ±Ù‡Ø§Ù„ Ø§Ù†ÙˆØ§Ø¹ Ù‚Ø·Ø¹Ø§Øª ØµÙ†Ø¹ØªÛŒ ÙØ±Ø³ÙˆØ¯Ù‡.' },
    { icon:'ğŸ—ï¸', title:'Ø³Ù†Ú¯â€ŒØ²Ù†ÛŒ Ùˆ Ù¾Ø±Ø¯Ø§Ø®Øª', desc:'Ø¹Ù…Ù„ÛŒØ§Øª Ø³Ù†Ú¯â€ŒØ²Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÛŒØ§Ø¨ÛŒ Ø¨Ù‡ Ø³Ø·Ø­â€ŒÚ©Ø§Ø±ÛŒ Ø¯Ù‚ÛŒÙ‚ Ùˆ ØµØ§Ù.' },
    { icon:'ğŸ’¡', title:'Ù…Ø´Ø§ÙˆØ±Ù‡ ÙÙ†ÛŒ', desc:'Ø§Ø±Ø§Ø¦Ù‡ Ù…Ø´Ø§ÙˆØ±Ù‡ ÙÙ†ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´ Ø³Ø§Ø®Øª Ù‚Ø·Ø¹Ø§Øª.' }
  ],
  portfolio: [
    { emoji:'âš™ï¸', title:'Ø³Ø§Ø®Øª Ø´ÙØª ØµÙ†Ø¹ØªÛŒ', desc:'ØªØ±Ø§Ø´Ú©Ø§Ø±ÛŒ Ø´ÙØª ÙÙˆÙ„Ø§Ø¯ÛŒ Ø¨Ø§ Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§', tag:'ØªØ±Ø§Ø´Ú©Ø§Ø±ÛŒ', img:'' },
    { emoji:'ğŸ”©', title:'ØªÙˆÙ„ÛŒØ¯ Ø¨ÙˆØ´ Ùˆ ÛŒØ§ØªØ§Ù‚Ø§Ù†', desc:'Ø³Ø§Ø®Øª Ø¨ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø²ÛŒ Ø¨Ø§ ØªÙ„Ø±Ø§Ù†Ø³ Ø¯Ù‚ÛŒÙ‚', tag:'ØªØ±Ø§Ø´Ú©Ø§Ø±ÛŒ', img:'' },
    { emoji:'ğŸ—ï¸', title:'ÙØ±Ø²Ú©Ø§Ø±ÛŒ Ù‚Ø·Ø¹Ø§Øª Ù¾ÛŒÚ†ÛŒØ¯Ù‡', desc:'Ù…Ø§Ø´ÛŒÙ†â€ŒÚ©Ø§Ø±ÛŒ Ù‚Ø·Ø¹Ø§Øª Ø¨Ø§ Ø´Ú©Ù„ Ù¾ÛŒÚ†ÛŒØ¯Ù‡', tag:'ÙØ±Ø²Ú©Ø§Ø±ÛŒ', img:'' }
  ],
  articles: [
    { title:'ØªØ±Ø§Ø´Ú©Ø§Ø±ÛŒ Ú†ÛŒØ³ØªØŸ', link:'taraghkari-chist.html', icon:'ğŸ”©' },
    { title:'ÙØ±Ø²Ú©Ø§Ø±ÛŒ Ú†ÛŒØ³ØªØŸ', link:'ferezkari-chist.html', icon:'âš¡' },
    { title:'ØªØ±Ø§Ø´Ú©Ø§Ø±ÛŒ Ø¯Ø± Ø§ØµÙÙ‡Ø§Ù†', link:'taraghkari-dar-isfahan.html', icon:'ğŸ“' },
    { title:'Ø®Ø¯Ù…Ø§Øª Ù…Ø§Ø´ÛŒÙ†â€ŒÚ©Ø§Ø±ÛŒ', link:'khadamat-mashinKari.html', icon:'ğŸ­' },
    { title:'Ù†Ú©Ø§Øª Ø®Ø±ÛŒØ¯ Ù‚Ø·Ø¹Ù‡', link:'nakate-kharid-taghe-taraghkari.html', icon:'ğŸ’¡' }
  ]
};

// ===== STORAGE =====
function load() { try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {}; } catch(e) { return {}; } }
function save(data) { localStorage.setItem(STORAGE_KEY, JSON.stringify(data)); changeCount++; document.getElementById('stat-changes').textContent = changeCount; }
function getData(key) { const d = load(); return d[key] !== undefined ? d[key] : defaults[key]; }
function setData(key, val) { const d = load(); d[key] = val; save(d); }

// ===== LOGIN =====
function doLogin() {
  const pass = document.getElementById('password-input').value;
  const stored = getData('password');
  if (pass === stored) {
    document.getElementById('login-screen').style.display = 'none';
    document.getElementById('admin-screen').style.display = 'block';
    initAdmin();
  } else {
    document.getElementById('login-error').style.display = 'block';
    document.getElementById('password-input').value = '';
  }
}
function doLogout() {
  document.getElementById('admin-screen').style.display = 'none';
  document.getElementById('login-screen').style.display = 'flex';
  document.getElementById('password-input').value = '';
  document.getElementById('login-error').style.display = 'none';
}

// ===== NAVIGATION =====
const panelTitles = {
  dashboard:'Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯', contact:'Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³', hero:'Ù…ØªÙ† ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ',
  services:'Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø¯Ù…Ø§Øª', portfolio:'Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ø±Ù‡Ø§', logo:'Ù„ÙˆÚ¯Ùˆ Ùˆ Ù†Ø§Ù…',
  articles:'Ù…Ù‚Ø§Ù„Ø§Øª', stats:'Ø¢Ù…Ø§Ø± Ø³Ø§ÛŒØª', security:'Ø§Ù…Ù†ÛŒØª'
};
function showPanel(name) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  document.getElementById('panel-'+name).classList.add('active');
  document.getElementById('panel-title').textContent = panelTitles[name];
  event.currentTarget.classList.add('active');
}

// ===== TOAST =====
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg; t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3000);
}

// ===== INIT =====
function initAdmin() {
  loadContact(); loadHero(); loadStats(); loadAbout(); loadLogo();
  renderServices(); renderPortfolio(); renderArticles();
  updateDashStats();
}

// ===== CONTACT =====
function loadContact() {
  const d = getData('contact');
  ['phone','mobile','address','hours','email','map'].forEach(k => {
    const el = document.getElementById('c-'+k);
    if(el) el.value = d[k] || '';
  });
}
function saveContact() {
  const d = {};
  ['phone','mobile','address','hours','email','map'].forEach(k => {
    d[k] = document.getElementById('c-'+k).value;
  });
  setData('contact', d);
  applyToMainPage();
  showToast('âœ… Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
}

// ===== HERO =====
function loadHero() {
  const h = getData('hero');
  document.getElementById('h-title1').value = h.title1 || '';
  document.getElementById('h-title2').value = h.title2 || '';
  document.getElementById('h-desc').value = h.desc || '';
}
function saveHero() {
  setData('hero', {
    title1: document.getElementById('h-title1').value,
    title2: document.getElementById('h-title2').value,
    desc: document.getElementById('h-desc').value
  });
  applyToMainPage();
  showToast('âœ… Ù…ØªÙ† ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
}

// ===== STATS =====
function loadStats() {
  const s = getData('stats');
  ['num1','lbl1','num2','lbl2','num3','lbl3'].forEach(k => {
    document.getElementById('s-'+k).value = s[k] || '';
  });
}
function saveStats() {
  const d = {};
  ['num1','lbl1','num2','lbl2','num3','lbl3'].forEach(k => d[k] = document.getElementById('s-'+k).value);
  setData('stats', d);
  applyToMainPage();
  showToast('âœ… Ø¢Ù…Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
}

// ===== ABOUT =====
function loadAbout() {
  const a = getData('about');
  document.getElementById('about-p1').value = a.p1 || '';
  document.getElementById('about-p2').value = a.p2 || '';
}
function saveAbout() {
  setData('about', {
    p1: document.getElementById('about-p1').value,
    p2: document.getElementById('about-p2').value
  });
  applyToMainPage();
  showToast('âœ… Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
}

// ===== LOGO =====
function loadLogo() {
  const l = getData('logo');
  document.getElementById('logo-name1').value = l.name1 || '';
  document.getElementById('logo-name2').value = l.name2 || '';
  document.getElementById('logo-preview-text').textContent = (l.name1||'') + ' ' + (l.name2||'');
  if(l.img) {
    document.getElementById('logo-preview-img').src = l.img;
    document.getElementById('logo-preview-img').style.display = 'block';
    document.getElementById('logo-preview-text').style.display = 'none';
  }
}
function handleLogoUpload(e) {
  const file = e.target.files[0];
  if(!file) return;
  if(file.size > 2*1024*1024) { showToast('âŒ ÙØ§ÛŒÙ„ Ø¨ÛŒØ´ Ø§Ø² Û²MB Ø§Ø³Øª'); return; }
  const reader = new FileReader();
  reader.onload = ev => {
    const data = ev.target.result;
    document.getElementById('logo-preview-img').src = data;
    document.getElementById('logo-preview-img').style.display = 'block';
    document.getElementById('logo-preview-text').style.display = 'none';
    const l = getData('logo'); l.img = data; setData('logo', l);
  };
  reader.readAsDataURL(file);
}
function saveLogo() {
  const l = getData('logo');
  l.name1 = document.getElementById('logo-name1').value;
  l.name2 = document.getElementById('logo-name2').value;
  document.getElementById('logo-preview-text').textContent = l.name1 + ' ' + l.name2;
  setData('logo', l);
  applyToMainPage();
  showToast('âœ… Ù„ÙˆÚ¯Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
}

// ===== SERVICES =====
function renderServices() {
  const services = getData('services');
  document.getElementById('dash-services').textContent = services.length;
  document.getElementById('stat-services').textContent = services.length;
  const container = document.getElementById('services-list');
  container.innerHTML = '';
  services.forEach((s, i) => {
    const div = document.createElement('div');
    div.className = 'service-admin-item';
    div.innerHTML = `
      <input class="field-input" value="${s.icon}" style="width:60px;text-align:center;font-size:1.3rem;" id="si-icon-${i}">
      <input class="field-input" value="${s.title}" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø®Ø¯Ù…Øª" id="si-title-${i}">
      <input class="field-input" value="${s.desc}" placeholder="ØªÙˆØ¶ÛŒØ­ Ú©ÙˆØªØ§Ù‡" id="si-desc-${i}">
      <button class="btn-danger" onclick="removeService(${i})">ğŸ—‘</button>
    `;
    container.appendChild(div);
  });
}
function addService() {
  const services = getData('services');
  services.push({ icon:'âš™ï¸', title:'Ø®Ø¯Ù…Øª Ø¬Ø¯ÛŒØ¯', desc:'ØªÙˆØ¶ÛŒØ­ Ø®Ø¯Ù…Øª' });
  setData('services', services);
  renderServices();
}
function removeService(i) {
  const services = getData('services');
  services.splice(i, 1);
  setData('services', services);
  renderServices();
}
function saveServices() {
  const services = getData('services');
  services.forEach((s, i) => {
    s.icon = document.getElementById('si-icon-'+i)?.value || s.icon;
    s.title = document.getElementById('si-title-'+i)?.value || s.title;
    s.desc = document.getElementById('si-desc-'+i)?.value || s.desc;
  });
  setData('services', services);
  applyToMainPage();
  showToast('âœ… Ø®Ø¯Ù…Ø§Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
}

// ===== PORTFOLIO =====
function renderPortfolio() {
  const items = getData('portfolio');
  document.getElementById('dash-portfolio').textContent = items.length;
  document.getElementById('stat-portfolio').textContent = items.length;
  const grid = document.getElementById('portfolio-grid');
  grid.innerHTML = '';
  items.forEach((item, i) => {
    const div = document.createElement('div');
    div.className = 'portfolio-admin-item';
    div.innerHTML = `
      <div class="portfolio-admin-img" id="pf-img-${i}" onclick="uploadPortfolioImg(${i})" style="cursor:pointer;" title="Ú©Ù„ÛŒÚ© Ø¨Ø±Ø§ÛŒ Ø¢Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³">
        ${item.img ? `<img src="${item.img}" alt="">` : `<span>${item.emoji||'ğŸ–¼ï¸'}</span>`}
        <div style="position:absolute;bottom:4px;right:4px;background:rgba(0,0,0,0.6);border-radius:4px;padding:2px 6px;font-size:0.65rem;color:var(--gold);">ğŸ“· Ø¹Ú©Ø³</div>
      </div>
      <input type="file" id="pf-file-${i}" accept="image/*" style="display:none" onchange="handlePortfolioImg(event,${i})">
      <div class="portfolio-admin-info">
        <input value="${item.title}" placeholder="Ø¹Ù†ÙˆØ§Ù†" id="pf-title-${i}">
        <input value="${item.desc}" placeholder="ØªÙˆØ¶ÛŒØ­" id="pf-desc-${i}">
        <input value="${item.tag||''}" placeholder="Ø¨Ø±Ú†Ø³Ø¨" id="pf-tag-${i}">
      </div>
      <div class="portfolio-admin-actions">
        <button class="btn-danger" onclick="removePortfolio(${i})" style="font-size:0.72rem;padding:0.3rem 0.6rem;">ğŸ—‘ Ø­Ø°Ù</button>
      </div>
    `;
    grid.appendChild(div);
  });
}
function uploadPortfolioImg(i) { document.getElementById('pf-file-'+i).click(); }
function handlePortfolioImg(e, i) {
  const file = e.target.files[0]; if(!file) return;
  if(file.size > 3*1024*1024) { showToast('âŒ ÙØ§ÛŒÙ„ Ø¨ÛŒØ´ Ø§Ø² Û³MB Ø§Ø³Øª'); return; }
  const reader = new FileReader();
  reader.onload = ev => {
    const items = getData('portfolio');
    items[i].img = ev.target.result;
    setData('portfolio', items);
    renderPortfolio();
  };
  reader.readAsDataURL(file);
}
function addPortfolioItem() {
  const items = getData('portfolio');
  items.push({ emoji:'ğŸ–¼ï¸', title:'Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ø± Ø¬Ø¯ÛŒØ¯', desc:'ØªÙˆØ¶ÛŒØ­ Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ø±', tag:'ØªØ±Ø§Ø´Ú©Ø§Ø±ÛŒ', img:'' });
  setData('portfolio', items);
  renderPortfolio();
}
function removePortfolio(i) {
  const items = getData('portfolio');
  items.splice(i, 1);
  setData('portfolio', items);
  renderPortfolio();
}
function savePortfolio() {
  const items = getData('portfolio');
  items.forEach((item, i) => {
    item.title = document.getElementById('pf-title-'+i)?.value || item.title;
    item.desc = document.getElementById('pf-desc-'+i)?.value || item.desc;
    item.tag = document.getElementById('pf-tag-'+i)?.value || item.tag;
  });
  setData('portfolio', items);
  applyToMainPage();
  showToast('âœ… Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ø±Ù‡Ø§ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
}

// ===== ARTICLES =====
function renderArticles() {
  const articles = getData('articles');
  document.getElementById('dash-articles').textContent = articles.length;
  document.getElementById('stat-articles').textContent = articles.length;
  const container = document.getElementById('articles-list');
  container.innerHTML = '';
  articles.forEach((a, i) => {
    const div = document.createElement('div');
    div.className = 'service-admin-item';
    div.innerHTML = `
      <input class="field-input" value="${a.icon||'ğŸ“'}" style="width:60px;text-align:center;font-size:1.3rem;" id="art-icon-${i}">
      <input class="field-input" value="${a.title}" placeholder="Ø¹Ù†ÙˆØ§Ù† Ù…Ù‚Ø§Ù„Ù‡" id="art-title-${i}">
      <input class="field-input" value="${a.link}" placeholder="Ù„ÛŒÙ†Ú© ÙØ§ÛŒÙ„ (Ù…Ø«Ù„Ø§Ù‹ article.html)" id="art-link-${i}">
      <button class="btn-danger" onclick="removeArticle(${i})">ğŸ—‘</button>
    `;
    container.appendChild(div);
  });
}
function addArticle() {
  const articles = getData('articles');
  articles.push({ icon:'ğŸ“', title:'Ù…Ù‚Ø§Ù„Ù‡ Ø¬Ø¯ÛŒØ¯', link:'new-article.html' });
  setData('articles', articles);
  renderArticles();
}
function removeArticle(i) {
  const articles = getData('articles');
  articles.splice(i, 1);
  setData('articles', articles);
  renderArticles();
}
function saveArticles() {
  const articles = getData('articles');
  articles.forEach((a, i) => {
    a.icon = document.getElementById('art-icon-'+i)?.value || a.icon;
    a.title = document.getElementById('art-title-'+i)?.value || a.title;
    a.link = document.getElementById('art-link-'+i)?.value || a.link;
  });
  setData('articles', articles);
  applyToMainPage();
  showToast('âœ… Ù…Ù‚Ø§Ù„Ø§Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
}

// ===== SECURITY =====
function changePassword() {
  const old = document.getElementById('old-pass').value;
  const n1 = document.getElementById('new-pass').value;
  const n2 = document.getElementById('new-pass2').value;
  const current = getData('password');
  if(old !== current) { showToast('âŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ÙØ¹Ù„ÛŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª'); return; }
  if(n1.length < 6) { showToast('âŒ Ø±Ù…Ø² Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ Û¶ Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¨Ø§Ø´Ø¯'); return; }
  if(n1 !== n2) { showToast('âŒ Ø±Ù…Ø²Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ ÛŒÚ©Ø³Ø§Ù† Ù†ÛŒØ³ØªÙ†Ø¯'); return; }
  setData('password', n1);
  ['old-pass','new-pass','new-pass2'].forEach(id => document.getElementById(id).value = '');
  showToast('âœ… Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØºÛŒÛŒØ± Ú©Ø±Ø¯');
}

// ===== BACKUP =====
function exportData() {
  const data = load();
  const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'parsasanat-backup.json'; a.click();
  URL.revokeObjectURL(url);
  showToast('âœ… Ø¨Ú©Ø§Ù¾ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯');
}
function importData(e) {
  const file = e.target.files[0]; if(!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    try {
      const data = JSON.parse(ev.target.result);
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
      initAdmin();
      applyToMainPage();
      showToast('âœ… Ø¨Ú©Ø§Ù¾ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯');
    } catch(err) { showToast('âŒ ÙØ§ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª'); }
  };
  reader.readAsText(file);
}
function resetAll() {
  if(!confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù†ÛŒØ¯ØŸ ØªÙ…Ø§Ù… ØªØºÛŒÛŒØ±Ø§Øª Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯!')) return;
  localStorage.removeItem(STORAGE_KEY);
  initAdmin();
  applyToMainPage();
  showToast('âœ… Ù‡Ù…Ù‡ ØªØºÛŒÛŒØ±Ø§Øª Ø±ÛŒØ³Øª Ø´Ø¯');
}

// ===== APPLY TO MAIN PAGE =====
// This updates the main index.html via postMessage if open in another tab,
// and also stores data so index.html can read it on load.
function applyToMainPage() {
  // Data is already saved to localStorage - index.html reads it on page load
  // Try to notify any open tabs
  try {
    const bc = new BroadcastChannel('parsasanat');
    bc.postMessage('reload');
    bc.close();
  } catch(e) {}
  updateDashStats();
}

function updateDashStats() {
  const services = getData('services');
  const portfolio = getData('portfolio');
  const articles = getData('articles');
  document.getElementById('dash-services').textContent = services.length;
  document.getElementById('dash-portfolio').textContent = portfolio.length;
  document.getElementById('dash-articles').textContent = articles.length;
  document.getElementById('stat-services').textContent = services.length;
  document.getElementById('stat-portfolio').textContent = portfolio.length;
  document.getElementById('stat-articles').textContent = articles.length;
}
</script>
</body>
</html>
